<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai&display=swap" rel="stylesheet">
</head>
<body style="background-image: url(oilbg.png);background-repeat: no-repeat;background-size: cover;font-family: 'Noto Sans Thai', sans-serif;">
    <p style="font-size: 2cm;position: absolute;top: -62px;width: 100%;text-align: center;">ราคาน้ำมันวันนี้</p>
    <p id="olddate" style="font-size: 0.7cm;font-style: bold;position: absolute;left: 270px;top: 117px;color: white;width: 200px;text-align: center;background-color: #00abf0;"></p>
    <p id="date" style="font-size: 0.7cm;font-style: bold;position: absolute;left: 500px;top: 117px;color: white;width: 200px;text-align: center;"></p>
    <p id="today1" style="font-size: 1cm;font-style: italic;position: absolute;left: 322px;top: 160px;"></p>
    <p id="today2" style="font-size: 1cm;font-style: italic;position: absolute;left: 322px;top: 235px;"></p>
    <p id="today3" style="font-size: 1cm;font-style: italic;position: absolute;left: 322px;top: 310px;"></p>
    <p id="today4" style="font-size: 1cm;font-style: italic;position: absolute;left: 322px;top: 390px;"></p>
    <p id="today5" style="font-size: 1cm;font-style: italic;position: absolute;left: 322px;top: 540px;"></p>
    <p id="today6" style="font-size: 1cm;font-style: italic;position: absolute;left: 322px;top: 620px;"></p>
    <p id="today7" style="font-size: 1cm;font-style: italic;position: absolute;left: 322px;top: 695px;"></p>
    <p id="today8" style="font-size: 1cm;font-style: italic;position: absolute;left: 322px;top: 770px;"></p>
    <p id="tomor1" style="font-size: 1.5cm;font-style: italic;position: absolute;left: 530px;top: 123px;"></p>
    <p id="tomor2" style="font-size: 1.5cm;font-style: italic;position: absolute;left: 530px;top: 203px;"></p>
    <p id="tomor3" style="font-size: 1.5cm;font-style: italic;position: absolute;left: 530px;top: 278px;"></p>
    <p id="tomor4" style="font-size: 1.5cm;font-style: italic;position: absolute;left: 530px;top: 358px;"></p>
    <p id="tomor5" style="font-size: 1.5cm;font-style: italic;position: absolute;left: 530px;top: 508px;"></p>
    <p id="tomor6" style="font-size: 1.5cm;font-style: italic;position: absolute;left: 530px;top: 583px;"></p>
    <p id="tomor7" style="font-size: 1.5cm;font-style: italic;position: absolute;left: 530px;top: 663px;"></p>
    <p id="tomor8" style="font-size: 1.5cm;font-style: italic;position: absolute;left: 530px;top: 738px;"></p>
    <p id="diff1" style="font-size: 1cm;font-style: italic;position: absolute;left: 775px;top: 165px;text-align: center;width: 100px;">-</p>
    <p id="diff2" style="font-size: 1cm;font-style: italic;position: absolute;left: 775px;top: 240px;text-align: center;width: 100px;">-</p>
    <p id="diff3" style="font-size: 1cm;font-style: italic;position: absolute;left: 775px;top: 315px;text-align: center;width: 100px;">-</p>
    <p id="diff4" style="font-size: 1cm;font-style: italic;position: absolute;left: 775px;top: 395px;text-align: center;width: 100px;">-</p>
    <p id="diff5" style="font-size: 1cm;font-style: italic;position: absolute;left: 775px;top: 545px;text-align: center;width: 100px;">-</p>
    <p id="diff6" style="font-size: 1cm;font-style: italic;position: absolute;left: 775px;top: 625px;text-align: center;width: 100px;">-</p>
    <p id="diff7" style="font-size: 1cm;font-style: italic;position: absolute;left: 775px;top: 700px;text-align: center;width: 100px;">-</p>
    <p id="diff8" style="font-size: 1cm;font-style: italic;position: absolute;left: 775px;top: 775px;text-align: center;width: 100px;">-</p>
    <script>
        function monthtotext(month) {
            //convert month to number
            var month = parseInt(month);
            switch (month) {
                case 1:
                    return "มกราคม";
                    break;
                case 2:
                    return "กุมภาพันธ์";
                    break;
                case 3:
                    return "มีนาคม";
                    break;
                case 4:
                    return "เมษายน";
                    break;
                case 5:
                    return "พฤษภาคม";
                    break;
                case 6:
                    return "มิถุนายน";
                    break;
                case 7:
                    return "กรกฎาคม";
                    break;
                case 8:
                    return "สิงหาคม";
                    break;
                case 9:
                    return "กันยายน";
                    break;
                case 10:
                    return "ตุลาคม";
                    break;
                case 11:
                    return "พฤศจิกายน";
                    break;
                case 12:
                    return "ธันวาคม";
                    break;
            }
        }

        //fetch from topapi.pwisetthon.com
        var requestOptions = {
            method: 'GET',
            redirect: 'follow'
        };

        fetch("https://anywhere.pwisetthon.com/https://topapi.pwisetthon.com", requestOptions)
        .then(response => response.json())
        .then(result => {

            document.getElementById("olddate").innerHTML = result[1][0].substring(0,2) + " " + monthtotext(result[1][0].substring(3,5));
            document.getElementById("date").innerHTML = result[0][0].substring(0,2) + " " + monthtotext(result[0][0].substring(3,5));

            let today = new Date();

            if(result[1][0] == today.getDate().toString().padStart(2, '0') + '/' + (today.getMonth() + 1).toString().padStart(2, '0') + '/' + (today.getFullYear()+543)) {
                document.getElementById("olddate").innerHTML = "วันนี้";
                document.getElementById("date").innerHTML = "พรุ่งนี้";
            }

            if(result[0][0] == today.getDate().toString().padStart(2, '0') + '/' + (today.getMonth() + 1).toString().padStart(2, '0') + '/' + (today.getFullYear()+543)) {
                document.getElementById("date").innerHTML = "วันนี้";
                if(result[1][0] == (today.getDate()-1).toString().padStart(2, '0') + '/' + (today.getMonth() + 1).toString().padStart(2, '0') + '/' + (today.getFullYear()+543)) {
                    document.getElementById("olddate").innerHTML = "เมื่อวาน";
                }
                
            }

            document.getElementById("today1").innerHTML = result[1][1];
            document.getElementById("today2").innerHTML = result[1][2];
            document.getElementById("today3").innerHTML = result[1][3];
            document.getElementById("today4").innerHTML = result[1][4];
            document.getElementById("today5").innerHTML = result[1][5];
            document.getElementById("today6").innerHTML = result[1][6];
            document.getElementById("today7").innerHTML = result[1][7];
            document.getElementById("today8").innerHTML = result[1][8];
            document.getElementById("tomor1").innerHTML = result[0][1];
            document.getElementById("tomor2").innerHTML = result[0][2];
            document.getElementById("tomor3").innerHTML = result[0][3];
            document.getElementById("tomor4").innerHTML = result[0][4];
            document.getElementById("tomor5").innerHTML = result[0][5];
            document.getElementById("tomor6").innerHTML = result[0][6];
            document.getElementById("tomor7").innerHTML = result[0][7];
            document.getElementById("tomor8").innerHTML = result[0][8];
            var listresult = ["1","2","3","4","5","6","7","8"];
            //loop result
            for(var i = 0; i < listresult.length; i++){
                if(result[2][i+1] == 0){
                    document.getElementById("diff"+listresult[i]).innerHTML = "-";
                }else{
                    if(result[2][i+1] > 0){
                        document.getElementById("diff"+listresult[i]).innerHTML = "+" + result[2][i+1];
                        document.getElementById("diff"+listresult[i]).style.color = "red";
                        document.getElementById("diff"+listresult[i]).style.fontWeight = "bold";
                        document.getElementById("tomor"+listresult[i]).style.color = "red";
                        document.getElementById("tomor"+listresult[i]).style.fontWeight = "bold";
                        //left position of tomor5 +10px
                        document.getElementById("tomor"+listresult[i]).style.left = (parseInt(document.getElementById("tomor"+listresult[i]).style.left.replace("px", "")) + 5) + "px";
                        //top position of tomor5 +5px
                        document.getElementById("tomor"+listresult[i]).style.top = (parseInt(document.getElementById("tomor"+listresult[i]).style.top.replace("px", "")) + 5) + "px";
                    }else{
                        document.getElementById("diff"+listresult[i]).innerHTML = result[2][i+1];
                        document.getElementById("diff"+listresult[i]).style.color = "green";
                        document.getElementById("diff"+listresult[i]).style.fontWeight = "bold";
                        document.getElementById("tomor"+listresult[i]).style.color = "green";
                        document.getElementById("tomor"+listresult[i]).style.fontWeight = "bold";
                        //left position of tomor5 -10px
                        //document.getElementById("tomor"+listresult[i]).style.left = document.getElementById("tomor"+listresult[i]).style.left.replace("px", "") - 15 + "px";
                        //top position of tomor5 -5px
                        //document.getElementById("tomor8").style.top = document.getElementById("tomor8").style.top.replace("px", "") - 5 + "px";
                    }
                }
            }
        })
        .catch(error => console.log('error', error));
    </script>
</body>
</html>
